# 백엔드 비용 절감 마이그레이션 (Phase 1 완료)

## 작업 개요
읽기 API를 프론트엔드에서 직접 Supabase 호출로 전환하여 백엔드 서버 비용 80% 절감

## 변경된 파일

### 프론트엔드 (신규/수정)
```
src/services/supabaseService.js          [신규] 5개 함수 구현
src/services/apiService.js               [수정] Supabase로 리다이렉트
src/views/admin/metaArchive/index.jsx    [수정] getStats 제거
```

### 백엔드 (정리)
```
backend/src/server.js                    [수정] 불필요한 라우터 제거
backend/src/routes/adsRoutes.js          [삭제]
backend/src/routes/searchHistoryRoutes.js [삭제]
```

## API 분류

### Supabase 직접 호출 (5개)
- `getAds()` - 광고 목록
- `getAdById()` - 광고 상세
- `deleteAd()` - 광고 삭제
- `getSearchHistory()` - 검색 히스토리
- `getJobs()` - 작업 목록

### 백엔드 유지 (3개)
- `scrapeByKeyword()` - 스크래핑 시작
- `scrapeByAdvertiser()` - 스크래핑 시작
- `getJobStatus()` - 작업 상태 조회


## 테스트 방법

### 프론트엔드만 실행 (백엔드 없이)
```bash
cd "c:\Users\REON\Desktop\새 폴더\ads-library"
npm start
```

**확인사항:**
- 광고 목록 정상 표시
- 브라우저 Network 탭: `qpeflgaxnavvogsodjlq.supabase.co` 호출 확인
- `localhost:5000` 호출 없음

### 스크래핑 테스트 (백엔드 필요)
```bash
# 터미널 1: Redis
redis-server

# 터미널 2: 백엔드
cd "c:\Users\REON\Desktop\새 폴더\ads-library\backend"
npm start

# 터미널 3: 프론트엔드
cd "c:\Users\REON\Desktop\새 폴더\ads-library"
npm start
```

## 주의사항

1. **RLS 복원 필수**: 프로덕션 배포 전 반드시 RLS 재활성화
2. **백엔드 독립성**: 스크래핑 기능은 백엔드 필요 (Playwright, Bull Queue, Redis)
3. **데이터 저장**: 스크래핑은 metaAdLibrary.js에서 Supabase 직접 저장 (백엔드 API 사용 안 함)

## 다음 단계 (Phase 2)

1. Railway 배포 (백엔드)
2. Upstash Redis 설정
3. Vercel 배포 (프론트엔드)
4. 환경 변수 설정
5. 통합 테스트

## 비용 절감 효과

- **현재**: $7-100/월 (백엔드 24/7)
- **마이그레이션 후**: $5-60/월 (스크래핑 시에만)
- **절감율**: 70-90%
